<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>雅国专用网易严选、考拉返利链接生成器</title>
</head>
<body>
<script src="https://lib.sinaapp.com/js/jquery/3.1.0/jquery-3.1.0.min.js"></script>
<script src="https://cdn.staticfile.org/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>
<div id="qr_container">
	<div class="input-group col-md-3 m-auto" style="margin-top:30%;">
        <input id="qr_text" type="text" class="form-control" style="text-align:center" onkeydown='if(event.keyCode==13) $("#qr_btn").click();' placeholder="请输入严选/考拉的商品网址!">
        <span class="input-group-btn">
            <button class="btn btn-info btn-search" id="qr_btn">提交</button>
            
         </span>
	</div>
	<br>
	<br>
	<div id="imgDiv" class="img-responsive center-block" style="text-align:center">
	</div>
	<br>
	<div style="text-align:center">
        
        <a id="link" href="#" class="btn btn-info" role="button">请返回上一级，点击页面底部的访问原网页，或复制网址后使用其他浏览器打开！</a>
	</div>
</div>
<script> $(document).ready(function() {
	function e(e) {
		var t = e,
			r = /http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/,
			n = new RegExp(r);
		return n.test(t)
	}
	function t() {
		document.createElement("canvas").getContext("2d");
		var t = $("#qr_text").val().trim();
		if (e(t)) {
			t = t.replace("&", "&ts_share=1&ts_sharerId=299612430f40089f&");
			var a = /^[\u0391-\uFFE5]+$/;
			$("#qr_container").qrcode("" == t || a.test(t) ? {
				render: "canvas",
				height: 256,
				width: 256,
				correctLevel: 0,
				text: n(t)
			} : {
				render: "canvas",
				height: 256,
				width: 256,
				correctLevel: 0,
				text: t
			}), $("#link").attr("href", t), $("#link").text("直接访问");
			var o = document.getElementsByTagName("canvas")[0],
				i = r(o);
			$("#imgDiv").append(i), $("canvas").remove()
		} else alert("您输入的网址不正确！"), $("#link").text("您输入的网址不正确！")
	}
	function r(e) {
		var t = new Image;
		return t.src = e.toDataURL("image/png"), t
	}
	function n(e) {
		var t, r, n, a;
		for (t = "", n = e.length, r = 0; n > r; r++) a = e.charCodeAt(r), a >= 1 && 127 >= a ? t += e.charAt(r) : a > 2047 ? (t += String.fromCharCode(224 | a >> 12 & 15), t += String.fromCharCode(128 | a >> 6 & 63), t += String.fromCharCode(128 | a >> 0 & 63)) : (t += String.fromCharCode(192 | a >> 6 & 31), t += String.fromCharCode(128 | a >> 0 & 63));
		return t
	}
	"or2.me" == window.location.hostname && $("#link").text("雅国专属"), $("#qr_btn").click(function() {
		0 != $("#link").text.length ? ($("#imgDiv  img").remove(), t()) : t()
	})
}); </script>
<link href="https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet">
</body>
</html>
